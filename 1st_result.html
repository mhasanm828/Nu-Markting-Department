<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NU Honours Result</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      .hid{
        display:none;
      }
      img{
        height: 150px;
        width: 150px;
      }
    </style>
</head>
<body class="bg-light">

    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card shadow">
                    <div class="card-body text-center">
                        <!-- University Logo -->
                        <img src="http://ems.nu.ac.bd/img/nu_logo_r.53c3c0be.png" alt="NU Logo">

                        <h3 class="card-title mt-3">NU Honours 1st Year Result</h3>

                        <!-- Form starts here -->
                        <form onsubmit="openResultPopup(event)">

                            <!-- Roll Number -->
                            <div class="hid mb-3">
                                <label for="roll_number" class="form-label">Roll Number</label>
                                <input type="text" class="form-control" id="roll_number" name="roll_number" placeholder="Enter Roll Number">
                            </div>

                            <!-- Registration Number -->
                            <div class="mb-3">
                                <label for="reg_no" class="form-label">Registration Number</label>
                                <input type="text" class="form-control" id="reg_no" name="reg_no" value="21223052122">
                            </div>

                            <!-- Exam Year -->
                            <div class="mb-3">
                                <label for="exam_year" class="form-label">Exam Year</label>
                                <input type="text" class="form-control" id="exam_year" name="exam_year" value="2022">
                            </div>

                            <!-- CAPTCHA Image -->
                            <div class="mb-3">
                                <img id="captcha_img" src="" alt="CAPTCHA" class="img-fluid mb-3">
                                <small><a href="#" onclick="refreshCaptcha()">Refresh CAPTCHA</a></small>
                            </div>

                            <!-- Input field for CAPTCHA code -->
                            <div class="mb-3">
                                <label for="letters_code" class="form-label">Enter CAPTCHA Code</label>
                                <input type="text" class="form-control" id="letters_code" name="letters_code" placeholder="Enter CAPTCHA" required>
                            </div>

                            <!-- View Result Button -->
                            <button type="submit" class="btn btn-primary">View Result</button>

                        </form>
                        <!-- Form ends here -->

                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Function to refresh the CAPTCHA image
        function refreshCaptcha() {
            const captchaImg = document.getElementById('captcha_img');
            captchaImg.src = `https://corsproxy.io/?https://results.nu.ac.bd/captcha_code_file.php?rand=${Math.random()}`;
        }

        // Call refreshCaptcha when the page loads to load the initial CAPTCHA
        refreshCaptcha();

        function openResultPopup(event) {
            event.preventDefault(); // Prevent the form from submitting the default way

            const rollNumber = document.getElementById('roll_number').value;
            const regNo = document.getElementById('reg_no').value;
            const examYear = document.getElementById('exam_year').value;
            const lettersCode = document.getElementById('letters_code').value;

            const url = `http://results.nu.ac.bd/honours/first_year_result_show.php?roll_number=${rollNumber}&reg_no=${regNo}&exam_year=${examYear}&letters_code=${lettersCode}`;

            // Open the URL in a pop-up window
            window.open(url, "ResultPopup", "width=800,height=600");
        }
    </script>

</body>
</html>